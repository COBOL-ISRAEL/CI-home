---
type: "blog"
title: "ניהול נתונים על סרטים מגנטיים סדרתיים – היתרה והחיבור לפעולות הלקוחות"
author: "אוריאל אופיר"
date: 2024-05-04
description: "איך מנהלים בנק עם מחשב מבוסס כרטיסי ניקוב?"
---

סרטים מגנטיים היו אמצעי האחסון העיקרי בשנות ה-60, והם היו **סדרתיים (Sequential)**. המשמעות היא שכדי לקרוא נתון מסוים, היה צריך לעבור על כל הנתונים שלפניו בסרט, מההתחלה ועד לנקודה הרצויה. זה שונה מאוד מכונני דיסק מודרניים המאפשרים גישה ישירה (Random Access) לכל נקודה בנתונים.

איך התמודדו עם המגבלה הזו ואיך ניהלו את חשבונות הבנק? התשובה טמונה ב**מודל העיבוד האצוותי (Batch Processing)** ובשימוש בשני סוגי קבצים עיקריים: **קובץ מאסטר** ו**קובץ טרנזקציות**.

### 1. שמירת מידע על סרטים מגנטיים סדרתיים: קובץ המאסטר

הבסיס לניהול חשבונות הבנק היה **קובץ המאסטר (Master File)**. זה היה סרט מגנטי (או סדרה של סרטים) שהכיל את המידע המעודכן ביותר על כל חשבונות הבנק. כל רשומה בקובץ המאסטר ייצגה חשבון בנק אחד וכללה:

* **מספר חשבון:** המפתח הייחודי לזיהוי הלקוח.
* **שם הלקוח ופרטים אישיים:** כתובת, טלפון (אם היה).
* **יתרה נוכחית:** הסכום המעודכן בחשבון.
* **נתונים נוספים:** תאריך פתיחת חשבון, סוג חשבון, פרטי ריבית וכו'.

החשבונות היו מסודרים באופן ממויין וסדרתי אחד אחרי השני.

**האתגר:** מכיוון שהסרט סדרתי, לא ניתן היה פשוט "לעדכן" רשומה במקום. כדי לשנות יתרה, היה צריך ליצור סרט מאסטר חדש לחלוטין.

### 2. חיבור פעולות הבנק למידע: קובץ הטרנזקציות

במהלך יום העבודה, כל הפעולות שבוצעו בסניפים (הפקדות, משיכות, העברות) נוקבו ל**כרטיסי ניקוב**, כרטיסים אלו הועברו למרכז המחשבים. שם, הם עברו תהליך של מיון והכנה, ולבסוף נשמרו על סרט מגנטי נפרד שנקרא **קובץ טרנזקציות (Transaction File)**. קובץ זה הכיל את כל הפעולות החדשות שטרם עובדו.

חשוב לציין שקובץ הטרנזקציות גם הוא היה ממוין במיון שתואם למיון של קובץ המאסטר, לפי מספר חשבון, כדי להתאים לסדר הרשומות בקובץ המאסטר.

### 3. עדכון היתרה: תהליך ה-Batch הלילית

התהליך המרכזי שחיבר בין הפעולות החדשות ליתרות הקיימות היה **הרצת ה-"Batch" הלילית**. זה היה תהליך קבוע ומוגדר היטב, שבו הופעלה תוכנת COBOL מרכזית (לרוב תוכנת "עדכון מאסטר") שביצעה את הפעולות הבאות:

1.  **קריאה מקבילה:** התוכנה קראה בו-זמנית משני סרטים:
    * **סרט המאסטר הישן:** שהכיל את היתרות מיום העבודה הקודם.
    * **סרט הטרנזקציות:** שהכיל את כל הפעולות החדשות של היום.
2.  **יצירת סרט מאסטר חדש:** התוכנה יצרה **סרט מגנטי חדש לחלוטין** – זה יהיה סרט המאסטר המעודכן ליום הבא.
3.  **השוואה ועדכון:**
    * התוכנה קראה רשומה אחת מקובץ המאסטר הישן ורשומה אחת (או יותר) מקובץ הטרנזקציות.
    * **אם מספר החשבון בקובץ הטרנזקציות תאם למספר החשבון בקובץ המאסטר,** התוכנה ביצעה את העדכון הנדרש (הוספה/הפחתה מהיתרה) וכתבה את הרשומה המעודכנת לסרט המאסטר החדש.
    * **אם לא היו טרנזקציות עבור חשבון מסוים,** התוכנה פשוט העתיקה את הרשומה כמות שהיא מסרט המאסטר הישן לסרט המאסטר החדש.
    * **אם הייתה טרנזקציה עבור חשבון חדש** (למשל, פתיחת חשבון), התוכנה הייתה מוסיפה רשומה חדשה לסרט המאסטר החדש.
    * **טיפול בשגיאות:** אם הופיעה טרנזקציה עבור חשבון לא קיים, או טעות אחרת, התוכנה הייתה מפיקה הודעת שגיאה (לרוב לדוח מודפס) ולא מעדכנת את הסרט החדש.

בסיום ההרצה, סרט המאסטר הישן נשמר כגיבוי, וסרט המאסטר החדש הפך ל"קובץ המאסטר" הרשמי של הבנק, המשקף את מצב החשבונות נכון לסוף יום העבודה.

### דיווח ללקוח: דפי חשבון ודוחות

**יתרת הלקוח** הייתה תמיד היתרה המופיעה ברשומה שלו בקובץ המאסטר המעודכן ביותר. כפי שתיארנו, דיווח זה הגיע ללקוח באמצעות **דפי חשבון מודפסים** שנשלחו בדואר, לרוב פעם בחודש. דפי החשבון הללו הופקו על ידי הרצת COBOL נוספת, שקראה את קובץ המאסטר המעודכן והדפיסה את הנתונים בפורמט קריא.

התהליך הזה, למרות שהיה מורכב ודרש תכנון קפדני ומשאבים אדירים, איפשר לבנקים לנהל מיליוני חשבונות וטרנזקציות בקנה מידה חסר תקדים לאותה תקופה. הוא היה הבסיס לכל מערכות המידע העסקיות הגדולות של העידן ההוא.

{{< comments >}}
